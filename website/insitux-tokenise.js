(()=>{"use strict";var t={d:(e,n)=>{for(var r in n)t.o(n,r)&&!t.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:n[r]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},e={};t.d(e,{tokenise:()=>at});var n={};t.r(n),t.d(n,{abs:()=>A,ceil:()=>$,concat:()=>b,cos:()=>B,ends:()=>f,flat:()=>x,floor:()=>U,getTimeMs:()=>T,has:()=>m,isArray:()=>c,isNum:()=>l,len:()=>i,log10:()=>J,log2:()=>H,logn:()=>G,lowerCase:()=>C,max:()=>W,min:()=>q,objKeys:()=>P,padEnd:()=>j,pi:()=>F,push:()=>g,randInt:()=>w,randNum:()=>k,range:()=>E,reverse:()=>v,round:()=>L,sign:()=>z,sin:()=>_,slen:()=>a,slice:()=>s,sortBy:()=>M,splice:()=>o,sqrt:()=>K,starts:()=>y,strIdx:()=>d,sub:()=>h,subIdx:()=>p,substr:()=>u,tan:()=>D,toNum:()=>r,trim:()=>I,trimEnd:()=>S,trimStart:()=>O,upperCase:()=>N});const r=t=>Number(t),s=(t,e,n)=>t.slice(e,n),o=(t,e,n)=>t.splice(e,n),i=t=>t.length,a=t=>t.length,l=t=>!Number.isNaN(Number(t)),c=t=>Array.isArray(t),u=(t,e,n)=>t.substring(e,e+(n??t.length)),d=(t,e)=>t[e],h=(t,e)=>t.includes(e),p=(t,e)=>t.indexOf(e),m=(t,e)=>t.includes(e),y=(t,e)=>t.startsWith(e),f=(t,e)=>t.endsWith(e),x=t=>t.flat(),b=(t,e)=>t.concat(e),g=(t,e)=>t.push(...e),M=(t,e)=>t.sort(e),v=t=>t.reverse(),C=t=>t.toLowerCase(),N=t=>t.toUpperCase(),I=t=>t.trim(),O=t=>t.trimStart(),S=t=>t.trimEnd(),j=(t,e)=>t.padEnd(e),k=(t,e)=>t+Math.random()*(e-t),w=(t,e)=>Math.floor(k(t,e)),E=t=>[...Array(t).keys()],P=t=>Object.keys(t),T=()=>(new Date).getTime(),A=Math.abs,q=Math.min,W=Math.max,_=Math.sin,B=Math.cos,D=Math.tan,K=Math.sqrt,L=Math.round,U=Math.floor,$=Math.ceil,z=Math.sign,F=Math.PI,G=Math.log,H=Math.log2,J=Math.log10,{concat:Q,has:R,flat:V,push:X,slice:Y}=n,{slen:Z,starts:tt,sub:et,substr:nt,strIdx:rt}=n,{isNum:st,len:ot,toNum:it}=n;function at(t,e,n=!0,r=!1){const s=[];let o=!1,i=!1,a=[0,0],l=!1,c=!1,u=!1,d=1,h=0;for(let p=0,m=Z(t);p<m;++p){const y=rt(t,p),f=p+1!==m?rt(t,p+1):"";if(++h,u){"\n"===y?(u=!1,++d,h=0):r&&(s[ot(s)-1].text+=y);continue}if(i){i=!1,o&&(s[ot(s)-1].text+={n:"\n",t:"\t",'"':'"'}[y]||`\\${y}`);continue}if("\\"===y){i=!0;continue}if('"'===y){(o=!o)&&(a=[d,h],s.push({typ:"str",text:"",errCtx:{invocationId:e,line:d,col:h}})),c=l=!1;continue}const x=et(" \t\n\r,",y);if(!o&&x){c=l=!1,"\n"===y&&(++d,h=0);continue}if(!o&&";"===y){u=!0,r&&s.push({typ:"rem",text:"",errCtx:{invocationId:e,line:d,col:h}});continue}const b={invocationId:e,line:d,col:h},g=t=>et("0123456789",t),M=et("()[]{}",y);if(c&&!g(y)&&(c="."===y&&!et(s[ot(s)-1].text,"."),c||M||x||(l=!0,s[ot(s)-1].typ="sym")),l&&M&&(l=!1),!o&&!l&&!c){if(M){const t={"[":"(","{":"(","(":"(",")":")","}":")","]":")"}[y];s.push({typ:t,text:n?t:y,errCtx:b}),n&&("["===y?s.push({typ:"sym",text:"vec",errCtx:b}):"{"===y&&s.push({typ:"sym",text:"dict",errCtx:b}));continue}c=g(y)||"."===y&&g(f)||"-"===y&&(g(f)||"."===f),l=!c;let t=l?"sym":"num";if(ot(s)){const{typ:e,text:n}=s[ot(s)-1];"sym"!==e||"var"!==n&&"let"!==n||(t="ref")}s.push({typ:t,text:"",errCtx:b})}s[ot(s)-1].text+=y}return{tokens:s,stringError:o?a:void 0}}window.insituxTokenise=e.tokenise})();
//# sourceMappingURL=insitux-tokenise.js.map